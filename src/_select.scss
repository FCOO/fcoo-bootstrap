/************************************************************
SELECTBOX

Implemented as a special version of dropdownmenu

Two versions:
1: bsSelectbox
    .dropdown.selectbox    
        .btn
        .dropdown-menu
            .dropdown-item or .dropdown-header
            ...

2: bsSelectList
    .selectList
        .dropdown-item or .dropdown-header
        ...

************************************************************/
$item-height   : $line-height-base * $font-size-base + 2*$btn-padding-y;
$item-height-sm: $line-height-base * $font-size-sm + 2*$btn-padding-y-sm;
$max-items-visible-in-selectbox: 4;

//1: bsSelectbox
.dropdown.selectbox {
    @include modal-element-margin-bottom();
    
    > .btn {
        width     : 100%;
        text-align: left;
        position  : relative;

        @include vertical-align-center();

        padding-right: $btn-padding-x /2;

        .arrow {
            @include right-side-icon('\f078'); 
        }

        .selected-content {
            width        : 100%;
            display      : inline-block;
            @include text-truncate();

            &.empty {
                color: $input-placeholder-color;
            }
        }
    }

    //Set size of button when size=sm
    &.selectbox-sm > .btn {
        @extend .btn-sm;
        padding-right: $btn-padding-x-sm / 2;
    }

    //Style for dropdown-menu and button when selectbox is 'open' (.show). There are different in the style depending on the dropdown is open over or under the button
    &.show {
       
        .dropdown-menu {
            //Common style for both "on-top" and "on-bottom"
            width  : 100%;
            padding: 0;

            //The button
            & + .btn.btn-#{$btn-style-name} {
                @include color-hover( $title-color, $title-bg-color, true, true);
            }

            //Style when open "on-bottom"
            &[x-placement *= bottom] {
                border-top-left-radius : 0;
                border-top-right-radius: 0;
                margin-top             : -$dropdown-border-width; //Move up to align with bottom of button               
                @include focus-style( top );

                //The button
                & + .btn.btn-#{$btn-style-name} {
                    border-bottom-right-radius: 0;
                    border-bottom-left-radius : 0;
                    &, &:focus { border-bottom-color: $control-border-color }
                    @include focus-style( bottom );
                }
            }

            //Style when open "on-top"
            &[x-placement *= top] {
                border-bottom-left-radius : 0;
                border-bottom-right-radius: 0;
                margin-bottom             : -$dropdown-border-width; //Move down to align with top of button               
                @include focus-style( bottom );

                //The button
                & + .btn.btn-#{$btn-style-name} {
                    border-top-right-radius: 0;
                    border-top-left-radius : 0;
                    &, &:focus { border-top-color: $control-border-color }
                    @include focus-style( top );
                }
            }
        }
    }
/* ORIGINAL
    .dropdown-menu {
        width  : 100%;
        padding: 0;

        border-top-left-radius : 0;
        border-top-right-radius: 0;
        margin-top             : -$dropdown-border-width; //Move up to align with bottom of button               
    }

    //Make the button 'active' when dropdown is open
    &.show {
        > .btn.btn-#{$btn-style-name} {
            @include color-hover( $title-color, $title-bg-color, true, true);

            border-bottom-right-radius: 0;
            border-bottom-left-radius : 0;

            &, &:focus {
                border-bottom-color: $control-border-color
            }
            
            @include focus-style( bottom );
        }

        .dropdown-menu {
            @include focus-style( top );
        }
    }


*/

} //end of .dropdown.selectbox  (1: bsSelectbox)



//2: bsSelectList    
.selectList {
    @include control-container();
}

//If the select has a scrollbar the left margin is reduced with the scrollbar-width to vertical-align content
.dropdown-menu.scrollbar-vertical {
    .dropdown-item, .dropdown-header { 
        margin-left: -$scroll-size;    
        width: calc(100% + 2*#{$scroll-size});
    }
    &.ps--active-y {
        .dropdown-item, .dropdown-header { 
            width: calc(100% + #{$scroll-size});
        }
    }
}


//.dropdown-item and .dropdown-header
.dropdown.selectbox, .selectList {
    
    //Adjust size for different size.
    //Normal
    & {
        .dropdown-menu {
            max-height: $max-items-visible-in-selectbox*$item-height;
        }
        
        .dropdown-item { 
            cursor: pointer;
            @include text-truncate();

            @include button-size($btn-padding-y, $btn-padding-x, $font-size-base, $line-height-base, $btn-border-radius);
            @include control-active-color(".dropdown-item");
        }
        .dropdown-header {
            @include header-variant( false, false, false ); 

            line-height: $line-height-base * $font-size-base / $font-size-sm; //Adjust line-height to make header and item same height

            //Items below header moves to the right
            &  ~ .dropdown-item {
                padding-left: $btn-padding-x + $font-size-base;
            }
        }
    }

    //Small
    &.selectbox-sm, &.selectList-sm {
        .dropdown-menu {
            max-height: $max-items-visible-in-selectbox*$item-height-sm;
        }

        .dropdown-item { 
            @include button-size($btn-padding-y-sm, $btn-padding-x-sm, $font-size-sm, $line-height-base, $btn-border-radius-sm);
        }
        .dropdown-header {
            @include header-variant-sm( false, false ); 
            line-height: $line-height-base * $font-size-sm / $font-size-xs; //Adjust line-height to make header and item same height

            //Items below header moves to the right
            &  ~ .dropdown-item {
                padding-left: $btn-padding-x-sm + $font-size-sm;
            }
        }
    }

/*REMOVED - Only DEFAULT sizes (= small and normal)
    //Large
    &.selectbox-lg {
        .dropdown-item, .dropdown-header { 
            font-size   : $font-size-lg; 
            padding     : $btn-padding-y-lg $btn-padding-x;
        }
        .dropdown-header {
            font-size: $font-size-header-lg;
            &  ~ .dropdown-item {
                padding-left: $btn-padding-x + $font-size-lg;
            }
        }
    }
*/
}